<a href="../../index.html" class="icon icon-home">vscode</a>

-

- [Home](../../index.html)

-

- - Customization
  - [Keyboard shortcuts](../../customization/keyboard-shortcuts/index.html)

-

- - Editor
  - [Accessibility](../../editor/accessibility/index.html)
  - [Codebasics](../../editor/codebasics/index.html)
  - [Command line](../../editor/command-line/index.html)
  - [Debugging](../../editor/debugging/index.html)
  - [Editingevolved](../../editor/editingevolved/index.html)
  - [Emmet](../../editor/emmet/index.html)
  - [Extension gallery](../../editor/extension-gallery/index.html)
  - [Integrated terminal](../../editor/integrated-terminal/index.html)
  - [Intellisense](../../editor/intellisense/index.html)
  - [Tasks appendix](../../editor/tasks-appendix/index.html)
  - [Tasks v1 appendix](../../editor/tasks-v1-appendix/index.html)
  - [Tasks v1](../../editor/tasks-v1/index.html)
  - [Tasks](../../editor/tasks/index.html)
  - [Userdefinedsnippets](../../editor/userdefinedsnippets/index.html)
  - [Versioncontrol](../../editor/versioncontrol/index.html)
  - [Whyvscode](../../editor/whyvscode/index.html)

-

- - extensionAPI
  - [Activation events](../activation-events/index.html)
  - [Api debugging](../api-debugging/index.html)
  - [Api markdown](../api-markdown/index.html)
  - [Api scm](../api-scm/index.html)
  - [Extension manifest](../extension-manifest/index.html)
  - [Extension points](../extension-points/index.html)
  - <a href="index.html" class="current">Language support</a>
    - [Language Extension Guidelines](#language-extension-guidelines)
    - <a href="#configuration-based-language-support" class="toctree-l4">Configuration Based Language Support</a>
    - <a href="#syntax-highlighting" class="toctree-l4">Syntax Highlighting</a>
    - <a href="#source-code-snippets" class="toctree-l4">Source Code Snippets</a>
    - <a href="#smart-bracket-matching" class="toctree-l4">Smart Bracket Matching</a>
    - <a href="#programmatic-language-support" class="toctree-l4">Programmatic Language Support</a>
    - <a href="#show-hovers" class="toctree-l4">Show Hovers</a>
    - <a href="#show-code-completion-proposals" class="toctree-l4">Show Code Completion Proposals</a>
    - <a href="#provide-diagnostics" class="toctree-l4">Provide Diagnostics</a>
    - <a href="#help-with-function-and-method-signatures" class="toctree-l4">Help With Function and Method Signatures</a>
    - <a href="#show-definitions-of-a-symbol" class="toctree-l4">Show Definitions of a Symbol</a>
    - <a href="#find-all-references-to-a-symbol" class="toctree-l4">Find All References to a Symbol</a>
    - <a href="#highlight-all-occurrences-of-a-symbol-in-a-document" class="toctree-l4">Highlight All Occurrences of a Symbol in a Document</a>
    - <a href="#show-all-symbol-definitions-within-a-document" class="toctree-l4">Show all Symbol Definitions Within a Document</a>
    - <a href="#show-all-all-symbol-definitions-in-folder" class="toctree-l4">Show all All Symbol Definitions in Folder</a>
    - <a href="#possible-actions-on-errors-or-warnings" class="toctree-l4">Possible Actions on Errors or Warnings</a>
    - <a href="#codelens-show-actionable-context-information-within-source-code" class="toctree-l4">CodeLens - Show Actionable Context Information Within Source Code</a>
    - <a href="#rename-symbols" class="toctree-l4">Rename Symbols</a>
    - <a href="#format-source-code-in-an-editor" class="toctree-l4">Format Source Code in an Editor</a>
    - <a href="#format-the-selected-lines-in-an-editor" class="toctree-l4">Format the Selected Lines in an Editor</a>
    - <a href="#incrementally-format-code-as-the-user-types" class="toctree-l4">Incrementally Format Code as the User Types</a>
  - [Overview](../overview/index.html)
  - [Patterns and principles](../patterns-and-principles/index.html)
  - [Vscode api commands](../vscode-api-commands/index.html)
  - [Vscode api](../vscode-api/index.html)

-

- - Extensions
  - [Debugging extensions](../../extensions/debugging-extensions/index.html)
  - [Example debuggers](../../extensions/example-debuggers/index.html)
  - [Example hello world](../../extensions/example-hello-world/index.html)
  - [Example language server](../../extensions/example-language-server/index.html)
  - [Example word count](../../extensions/example-word-count/index.html)
  - [Overview](../../extensions/overview/index.html)
  - [Publish extension](../../extensions/publish-extension/index.html)
  - [Samples](../../extensions/samples/index.html)
  - [Testing extensions](../../extensions/testing-extensions/index.html)
  - [Themes snippets colorizers](../../extensions/themes-snippets-colorizers/index.html)
  - [Yocode](../../extensions/yocode/index.html)

-

- - Getstarted
  - [Introvideos](../../getstarted/introvideos/index.html)
  - [Keybindings](../../getstarted/keybindings/index.html)
  - [Locales](../../getstarted/locales/index.html)
  - [Settings](../../getstarted/settings/index.html)
  - [Theme color reference](../../getstarted/theme-color-reference/index.html)
  - [Themes](../../getstarted/themes/index.html)
  - [Userinterface](../../getstarted/userinterface/index.html)

-

- - Introvideos
  - [Basics](../../introvideos/basics/index.html)
  - [Codeediting](../../introvideos/codeediting/index.html)
  - [Configure](../../introvideos/configure/index.html)
  - [Debugging](../../introvideos/debugging/index.html)
  - [Extend](../../introvideos/extend/index.html)
  - [Intellisense](../../introvideos/intellisense/index.html)
  - [Quicktour](../../introvideos/quicktour/index.html)
  - [Versioncontrol](../../introvideos/versioncontrol/index.html)

-

- - Languages
  - [Cpp](../../languages/cpp/index.html)
  - [Csharp](../../languages/csharp/index.html)
  - [Css](../../languages/css/index.html)
  - [Dockerfile](../../languages/dockerfile/index.html)
  - [Go](../../languages/go/index.html)
  - [Html](../../languages/html/index.html)
  - [Identifiers](../../languages/identifiers/index.html)
  - [Javascript](../../languages/javascript/index.html)
  - [Jsconfig](../../languages/jsconfig/index.html)
  - [Json](../../languages/json/index.html)
  - [Markdown](../../languages/markdown/index.html)
  - [Overview](../../languages/overview/index.html)
  - [Php](../../languages/php/index.html)
  - [Python](../../languages/python/index.html)
  - [Tsql](../../languages/tsql/index.html)
  - [Typescript](../../languages/typescript/index.html)

-

- - Nodejs
  - [Angular tutorial](../../nodejs/angular-tutorial/index.html)
  - [Extensions](../../nodejs/extensions/index.html)
  - [Javascript transpilers](../../nodejs/javascript-transpilers/index.html)
  - [Nodejs debugging](../../nodejs/nodejs-debugging/index.html)
  - [Nodejs deployment](../../nodejs/nodejs-deployment/index.html)
  - [Nodejs tutorial](../../nodejs/nodejs-tutorial/index.html)
  - [Other javascript runtimes](../../nodejs/other-javascript-runtimes/index.html)
  - [Overview](../../nodejs/overview/index.html)
  - [Reactjs tutorial](../../nodejs/reactjs-tutorial/index.html)
  - [Tasks](../../nodejs/tasks/index.html)

-

- - Other
  - [Dotnet](../../other/dotnet/index.html)
  - [Office](../../other/office/index.html)
  - [Unity](../../other/unity/index.html)

-

- - Setup
  - [Additional components](../../setup/additional-components/index.html)
  - [Linux](../../setup/linux/index.html)
  - [Mac](../../setup/mac/index.html)
  - [Network](../../setup/network/index.html)
  - [Setup overview](../../setup/setup-overview/index.html)
  - [Windows](../../setup/windows/index.html)

-

- - Supporting
  - [Errors](../../supporting/errors/index.html)
  - [Faq](../../supporting/faq/index.html)
  - [Requirements](../../supporting/requirements/index.html)

-



[vscode](../../index.html)

- [Docs](../../index.html) »
- extensionAPI »
- Language support
-

---

# Language Extension Guidelines

When you hear about a language being supported in VS Code, you usually think first of syntax highlighting, code completion, and if applicable, debugging support. This is a good start, but language extensions can do a lot more.

With just configuration files, an extension can support syntax highlighting, snippets, and smart bracket matching. For more advanced language features, you need to extend VS Code through its extensibility [API](https://vscode.readthedocs.io/docs/extensionAPI/vscode-api.md) or by providing a [language server](../../docs/extensions/example-language-server.html).

A language server is a stand-alone server that speaks the [language server protocol](https://github.com/Microsoft/language-server-protocol/blob/master/protocol.md). You can implement the server in the programming language that is best suited for the task. For example, if there are good libraries written in Python for the language you want to support, you might want to consider implementing your language server in Python. If you choose to implement your language server in JavaScript or TypeScript, you can build on top of the VS Code [npm modules](https://github.com/Microsoft/vscode-languageserver-node).

Besides the implementation language, you have flexibility in deciding which parts of the language server protocol your language server implements. Your language server announces its capabilities in response to the protocol's `initialize` method.

However, the language server architecture is not the only way to provide language features in an extension. You can also implement features directly in your main extension code. In the guidelines below, we show both the **Language Server Protocol** approach (configuration and required events) and also a **Direct Implementation** section showing how to programmatically register specific language feature providers (ex. `registerHoverProvider`).

To make it easier for you to decide what to implement first and what to improve upon later, we show the language features as they appear in VS Code and follow with the classes and methods or language server protocol messages they map to. Also included is guidance on the **Basic** support required as well as descriptions of **Advanced** implementations.

## Configuration Based Language Support

[Syntax highlighting](https://vscode.readthedocs.io/docs/extensionAPI/language-support.md#syntax-highlighting), [snippets](https://vscode.readthedocs.io/docs/extensionAPI/language-support.md#source-code-snippets), and [smart bracket matching](https://vscode.readthedocs.io/docs/extensionAPI/language-support.md#smart-bracket-matching) can be implemented declaratively with configuration files and don't require writing any extension code.

### Language identifiers

VS Code maps different language configurations and providers to specific programming languages through a language identifier. This is a lowercase string representing the programming language or file type. For example, JavaScript has a language id of `javascript` and Markdown files `markdown`.

## Syntax Highlighting

![syntax highlighting](../images/language-support/syntax-highlighting.html)

In order to support syntax highlighting, your extension needs to register a TextMate grammar `.tmLanguage` for its language in its `package.json` file.

    "contributes": {
        "languages": [
            {
                "id": "markdown",
                ...
            }
        ],
        "grammars": [
            {
                "language": "markdown",
                "scopeName": "text.html.markdown",
                "path": "./syntaxes/markdown.tmLanguage"
            }
        ], ...
    }

> **Basic**
>
> Start with a simple grammar that supports colorization of strings, comments, and keywords.
>
> **Advanced**
>
> Provide a grammar that understands terms and expressions and thus supports colorization of variables and function references etc.

## Source Code Snippets

![Snippets at work](../images/language-support/snippets.html)

With code snippets, you can provide useful source code templates with placeholders. You need to register a file that contains the snippets for your language in your extension's `package.json` file. You can learn about VS Code's snippet schema in [Creating Your Own Snippets](https://vscode.readthedocs.io/docs/editor/userdefinedsnippets.md#creating-your-own-snippets).

    "contributes": {
        "snippets": [
            {
                "language": "javascript",
                "path": "./snippets/javascript.json"
            }, ...
        ], ...
    }

> **Basic**
>
> Provide snippets with placeholders such as this example for `markdown`:
>
> `json "Insert ordered list": { "prefix": "ordered list", "body": [ "1. ${first}", "2. ${second}", "3. ${third}", "$0" ], "description": "Insert ordered list" }`
>
> **Advanced**
>
> Provide snippets that use explicit tab stops to guide the user and use nested placeholders such as this example for `groovy`:
>
> `json "key: \"value\" (Hash Pair)": { "prefix": "key", "body": "${1:key}: ${2:\"${3:value}\"}" }`

## Smart Bracket Matching

![Smart Editing At Work](../images/language-support/smart-editing.html)

You can provide a language configuration in your extension's `package.json` file.

    "contributes": {
        "languages": [
            {
                "id": "typescript",
                ...
                "configuration": "./language-configuration.json"
            }, ...
        ]
        ...
    }

> **Basic**
>
> None
>
> **Advanced**
>
> Here is an example from `TypeScript`:
>
> `` json { "comments": { "lineComment": "//", "blockComment": [ "/*", "*/" ] }, "brackets": [ ["{", "}"], ["[", "]"], ["(", ")"], ["<", ">"] ], "autoClosingPairs": [ { "open": "{", "close": "}" }, { "open": "[", "close": "]" }, { "open": "(", "close": ")" }, { "open": "'", "close": "'", "notIn": ["string", "comment"] }, { "open": "\"", "close": "\"", "notIn": ["string"] }, { "open": "`", "close": "`", "notIn": ["string", "comment"] }, { "open": "/**", "close": " */", "notIn": ["string"] } ], "surroundingPairs": [ ["{", "}"], ["[", "]"], ["(", ")"], ["<", ">"], ["'", "'"], ["\"", "\""], ["`", "`"] ] } ``

## Programmatic Language Support

The rest of the language features require writing extension code to handle requests from VS Code. You can implement your language extension as a standalone server implementing the [language server protocol](https://github.com/Microsoft/language-server-protocol/blob/master/protocol.md) or directly register providers in your extension's `activate` method. Both approaches are shown in two sections called **LANGUAGE SERVER PROTOCOL** and **DIRECT IMPLEMENTATION**.

The language server protocol approach follows the pattern of describing your server's capabilities in the response to the `initialize` request and then handling specific requests based on the user's actions.

The direct implementation approach requires you register your feature provider when your extension is activated, often providing a `DocumentSelector` to identify the programming languages the provider supports.

In the examples below, the providers are being registered for Go language files.

    const GO_MODE: vscode.DocumentFilter = { language: 'go', scheme: 'file' };

## Show Hovers

Hovers show information about the symbol/object that's below the mouse cursor. This is usually the type of the symbol and a description.

![Hovers at Work](../images/language-support/hovers.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides hovers.

    {
        ...
        "capabilities" : {
            "hoverProvider" : "true",
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/hover` request.

#### Direct Implementation

    class GoHoverProvider implements HoverProvider {
        public provideHover(
            document: TextDocument, position: Position, token: CancellationToken):
            Thenable<Hover> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerHoverProvider(
                GO_MODE, new GoHoverProvider()));
        ...
    }

> **Basic**
>
> Show type information and include documentation if available.
>
> **Advanced**
>
> Colorize method signatures in the same style you colorize the code.

## Show Code Completion Proposals

Code completions provide context sensitive suggestions to the user.

![Code Completion at Work](../images/language-support/code-completion.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides completions and whether or not it supports the `completionItem\resolve` method to provide additional information for the computed completion items.

    {
        ...
        "capabilities" : {
            "completionProvider" : {
                "resolveProvider": "true",
                "triggerCharacters": [ '.' ]
            }
            ...
        }
    }

#### Direct Implementation

    class GoCompletionItemProvider implements vscode.CompletionItemProvider {
        public provideCompletionItems(
            document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken):
            Thenable<vscode.CompletionItem[]> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(getDisposable());
        ctx.subscriptions.push(
            vscode.languages.registerCompletionItemProvider(
                GO_MODE, new GoCompletionItemProvider(), '.', '\"'));
        ...
    }

> **Basic**
>
> You don't support resolve providers.
>
> **Advanced**
>
> You support resolve providers that compute additional information for completion proposal the user selects. This information is displayed along-side the selected item.

## Provide Diagnostics

Diagnostics are a way to indicate issues with the code.

![Diagnostics at Work](../images/language-support/diagnostics.html)

#### Language Server Protocol

Your language server send the `textDocument/publishDiagnostics` message to the language client. The message carries an array of diagnostic items for a resource URI.

**Note**: The client does not ask the server for diagnostics. The server pushes the diagnostic information to the client.

#### Direct Implementation

    let diagnosticCollection: vscode.DiagnosticCollection;

    export function activate(ctx: vscode.ExtensionContext): void {
      ...
      ctx.subscriptions.push(getDisposable());
      diagnosticCollection = vscode.languages.createDiagnosticCollection('go');
      ctx.subscriptions.push(diagnosticCollection);
      ...
    }

    function onChange() {
      let uri = document.uri;
      check(uri.fsPath, goConfig).then(errors => {
        diagnosticCollection.clear();
        let diagnosticMap: Map<string, vscode.Diagnostic[]> = new Map();
        errors.forEach(error => {
          let canonicalFile = vscode.Uri.file(error.file).toString();
          let range = new vscode.Range(error.line-1, error.startColumn, error.line-1, error.endColumn);
          let diagnostics = diagnosticMap.get(canonicalFile);
          if (!diagnostics) { diagnostics = []; }
          diagnostics.push(new vscode.Diagnostic(range, error.msg, error.severity));
          diagnosticMap.set(canonicalFile, diagnostics);
        });
        diagnosticMap.forEach((diags, file) => {
          diagnosticCollection.set(vscode.Uri.parse(file), diags);
        });
      })
    }

> **Basic**
>
> Report diagnostics for open editors. Minimally, this needs to happen on every save. Better, diagnostics should be computed based on the un-saved contents of the editor.
>
> **Advanced**
>
> Report diagnostics not only for the open editors but for all resources in the open folder, no matter whether they have ever been opened in an editor or not.

## Help With Function and Method Signatures

When the user enters a function or method, display information about the function/method that is being called.

![Type Hover](../images/language-support/signature-help.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides signature help.

    {
        ...
        "capabilities" : {
            "signatureHelpProvider" : {
                "triggerCharacters": [ '(' ]
            }
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/signatureHelp` request.

#### Direct Implementation

    class GoSignatureHelpProvider implements SignatureHelpProvider {
        public provideSignatureHelp(
            document: TextDocument, position: Position, token: CancellationToken):
            Promise<SignatureHelp> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerSignatureHelpProvider(
                GO_MODE, new GoSignatureHelpProvider(), '(', ','));
        ...
    }

> **Basic**
>
> Ensure that the signature help contains the documentation of the parameters of the function or method.
>
> **Advanced**
>
> Nothing additional.

## Show Definitions of a Symbol

Allow the user to see the definition of variables/functions/methods right where the variables/functions/methods are being used.

![Type Hover](../images/language-support/goto-definition.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides goto-definition locations.

    {
        ...
        "capabilities" : {
            "definitionProvider" : "true"
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/definition` request.

#### Direct Implementation

    class GoDefinitionProvider implements vscode.DefinitionProvider {
        public provideDefinition(
            document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken):
            Thenable<vscode.Location> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerDefinitionProvider(
                GO_MODE, new GoDefinitionProvider()));
        ...
    }

> **Basic**
>
> If a symbol is ambivalent, you can show multiple definitions.
>
> **Advanced**
>
> Nothing additional.

## Find All References to a Symbol

Allow the user to see all the source code locations where a certain variable/function/method/symbol is being used.

![Type Hover](../images/language-support/find-references.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides symbol reference locations.

    {
        ...
        "capabilities" : {
            "referencesProvider" : "true"
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/references` request.

#### Direct Implementation

    class GoReferenceProvider implements vscode.ReferenceProvider {
        public provideReferences(
            document: vscode.TextDocument, position: vscode.Position,
            options: { includeDeclaration: boolean }, token: vscode.CancellationToken):
            Thenable<vscode.Location[]> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerReferenceProvider(
                GO_MODE, new GoReferenceProvider()));
        ...
    }

> **Basic**
>
> Return the location (resource URI and range) for all references.
>
> **Advanced**
>
> Nothing additional.

## Highlight All Occurrences of a Symbol in a Document

Allow the user to see all occurrences of a symbol in the open editor.

![Type Hover](../images/language-support/document-highlights.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides symbol document locations.

    {
        ...
        "capabilities" : {
            "documentHighlightProvider" : "true"
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/documentHighlight` request.

#### Direct Implementation

    class GoDocumentHighlightProvider implements vscode.DocumentHighlightProvider {
        public provideDocumentHighlights(
            document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken):
            vscode.DocumentHighlight[] | Thenable<vscode.DocumentHighlight[]>;
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerDocumentHighlightProvider(
                GO_MODE, new GoDocumentHighlightProvider()));
        ...
    }

> **Basic**
>
> You return the ranges in the editor's document where the references are being found.
>
> **Advanced**
>
> Nothing additional.

## Show all Symbol Definitions Within a Document

Allow the user to quickly navigate to any symbol definition in the open editor.

![Type Hover](../images/language-support/document-symbols.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides symbol document locations.

    {
        ...
        "capabilities" : {
            "documentSymbolProvider" : "true"
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/documentSymbol` request.

#### Direct Implementation

    class GoDocumentSymbolProvider implements vscode.DocumentSymbolProvider {
        public provideDocumentSymbols(
            document: vscode.TextDocument, token: vscode.CancellationToken):
            Thenable<vscode.SymbolInformation[]> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerDocumentSymbolProvider(
                GO_MODE, new GoDocumentSymbolProvider()));
        ...
    }

> **Basic**
>
> Return all symbols in the document. Define the kinds of symbols such as variables, functions, classes, methods, etc.
>
> **Advanced**
>
> Nothing additional.

## Show all All Symbol Definitions in Folder

Allow the user to quickly navigate to symbol definitions anywhere in the folder (workspace) opened in VS Code.

![Type Hover](../images/language-support/workspace-symbols.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides global symbol locations.

    {
        ...
        "capabilities" : {
            "workspaceSymbolProvider" : "true"
            ...
        }
    }

In addition, your language server needs to respond to the `workspace/symbol` request.

#### Direct Implementation

    class GoWorkspaceSymbolProvider implements vscode.WorkspaceSymbolProvider {
        public provideWorkspaceSymbols(
            query: string, token: vscode.CancellationToken):
            Thenable<vscode.SymbolInformation[]> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerWorkspaceSymbolProvider(
                new GoWorkspaceSymbolProvider()));
        ...
    }

> **Basic**
>
> Return all symbols define by the source code within the open folder. Define the kinds of symbols such as variables, functions, classes, methods, etc.
>
> **Advanced**
>
> Nothing additional.

## Possible Actions on Errors or Warnings

Provide the user with possible corrective actions right next to an error or warning. If actions are available, a light bulb appears next to the error or warning. When the user clicks the light bulb, a list of available code actions is presented.

![Type Hover](../images/language-support/quick-fixes.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides code actions.

    {
        ...
        "capabilities" : {
            "codeActionProvider" : "true"
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/codeAction` request.

#### Direct Implementation

    class GoCodeActionProvider implements vscode.CodeActionProvider {
        public provideCodeActions(
            document: vscode.TextDocument, range: vscode.Range,
            context: vscode.CodeActionContext, token: vscode.CancellationToken):
            Thenable<vscode.Command[]> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerCodeActionsProvider(
                GO_MODE, new GoCodeActionProvider()));
        ...
    }

> **Basic**
>
> Provide code actions for error/warning correcting actions.
>
> **Advanced**
>
> In addition, provide source code manipulation actions such as refactoring. For example, `Extract Method`.

## CodeLens - Show Actionable Context Information Within Source Code

Provide the user with actionable, contextual information that is displayed interspersed with the source code.

![Type Hover](../images/language-support/code-lens.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides CodeLens results and whether it supports the `codeLens\resolve` method to bind the CodeLens to its command.

    {
        ...
        "capabilities" : {
            "codeLensProvider" : {
                "resolveProvider": "true"
            }
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/codeLens` request.

#### Direct Implementation

    class GoRCodeLensProvider implements vscode.CodeLensProvider {
        public provideCodeLenses(document: TextDocument, token: CancellationToken):
            CodeLens[] | Thenable<CodeLens[]> {
        ...
        }

        public resolveCodeLens?(codeLens: CodeLens, token: CancellationToken):
             CodeLens | Thenable<CodeLens> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerCodeLensProvider(
                GO_MODE, new GoCodeLensProvider()));
        ...
    }

> **Basic**
>
> Define the CodeLens results that are available for a document.
>
> **Advanced**
>
> Bind the CodeLens results to a command by responding to `codeLens/resolve`.

## Rename Symbols

Allow the user to rename a symbol and update all references to the symbol.

![Type Hover](../images/language-support/rename.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides for renaming.

    {
        ...
        "capabilities" : {
            "renameProvider" : "true"
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/rename` request.

#### Direct Implementation

    class GoRenameProvider implements vscode.RenameProvider {
        public provideRenameEdits(
            document: vscode.TextDocument, position: vscode.Position,
            newName: string, token: vscode.CancellationToken):
            Thenable<vscode.WorkspaceEdit> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerRenameProvider(
                GO_MODE, new GoRenameProvider()));
        ...
    }

> **Basic**
>
> Don't provide rename support.
>
> **Advanced**
>
> Return the list of all workspace edits that need to be performed, for example all edits across all files that contain references to the symbol.

## Format Source Code in an Editor

Provide the user with support for formatting whole documents.

![Document Formatting at Work](../images/language-support/format-document.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides document formatting.

    {
        ...
        "capabilities" : {
            "documentFormattingProvider" : "true"
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/formatting` request.

#### Direct Implementation

    class GoDocumentFormatter implements vscode.DocumentFormattingEditProvider {
        public formatDocument(document: vscode.TextDocument):
            Thenable<vscode.TextEdit[]> {
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerDocumentFormattingEditProvider(
                GO_MODE, new GoDocumentFormatter()));
        ...
    }

> **Basic**
>
> Don't provide formatting support.
>
> **Advanced**
>
> You should always return the smallest possible text edits that result in the source code being formatted. This is crucial to ensure that markers such as diagnostic results are adjusted correctly and are not lost.

## Format the Selected Lines in an Editor

Provide the user with support for formatting a selected range of lines in a document.

![Document Formatting at Work](../images/language-support/format-document-range.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides formatting support for ranges of lines.

    {
        ...
        "capabilities" : {
            "documentRangeFormattingProvider" : "true"
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/rangeFormatting` request.

#### Direct Implementation

    class GoDocumentRangeFormatter implements vscode.DocumentRangeFormattingEditProvider{
        public provideDocumentRangeFormattingEdits(
            document: vscode.TextDocument, range: vscode.Range,
            options: vscode.FormattingOptions, token: vscode.CancellationToken):
            Thenable<vscode.TextEdit[]>;
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerDocumentRangeFormattingEditProvider(
                GO_MODE, new GoDocumentRangeFormatter()));
        ...
    }

> **Basic**
>
> Don't provide formatting support.
>
> **Advanced**
>
> You should always return the smallest possible text edits that result in the source code being formatted. This is crucial to ensure that markers such as diagnostic results are adjusted corrected and are not lost.

## Incrementally Format Code as the User Types

Provide the user with support for formatting text as they type.

**Note**: The user [setting](https://vscode.readthedocs.io/docs/getstarted/settings.md) `editor.formatOnType` controls whether source code gets formatted or not as the user types.

![Document Formatting at Work](../images/language-support/format-on-type.html)

#### Language Server Protocol

In the response to the `initialize` method, your language server needs to announce that it provides formatting as the user types. It also needs to tell the client on which characters formatting should be triggered. `moreTriggerCharacters` is optional.

    {
        ...
        "capabilities" : {
            "documentOnTypeFormattingProvider" : {
                "firstTriggerCharacter": "}",
                "moreTriggerCharacter": [";", ","]
            }
            ...
        }
    }

In addition, your language server needs to respond to the `textDocument/onTypeFormatting` request.

#### Direct Implementation

    class GoOnTypingFormatter implements vscode.OnTypeFormattingEditProvider{
        public provideOnTypeFormattingEdits(
            document: vscode.TextDocument, position: vscode.Position,
            ch: string, options: vscode.FormattingOptions, token: vscode.CancellationToken):
            Thenable<vscode.TextEdit[]>;
        ...
        }
    }

    export function activate(ctx: vscode.ExtensionContext): void {
        ...
        ctx.subscriptions.push(
            vscode.languages.registerOnTypeFormattingEditProvider(
                GO_MODE, new GoOnTypingFormatter()));
        ...
    }

> **Basic**
>
> Don't provide formatting support.
>
> **Advanced**
>
> You should always return the smallest possible text edits that result in the source code being formatted. This is crucial to ensure that markers such as diagnostic results are adjusted corrected and are not lost.

<a href="../overview/index.html" class="btn btn-neutral float-right" title="Overview">Next <span class="icon icon-circle-arrow-right"></span></a> <a href="../extension-points/index.html" class="btn btn-neutral" title="Extension points"><span class="icon icon-circle-arrow-left"></span> Previous</a>

---

<span class="rst-current-version" toggle="rst-current-version"> <span class="fa fa-book"> Read the Docs</span> <span class="fa fa-caret-down"></span> </span>
